{% extends 'base.html.jinja' %}

{% block content %}
  <div class="results">
    <h1>Calculation Results</h1>
    <input type="hidden" id="original_price" value="{{ price }}">
    <p><strong>Price:</strong> <span id="displayed_price">{{ price | safe }}</span></p>
    <p><strong>Filament Used:</strong> {{ filament_used | safe }} grams</p>
    <p><strong>Total Printing Hours:</strong> {{ total_hours | safe }}</p>
    <p>{{ order_id }}</p>
    <form action="/submit" method="POST">
      <div class="form-group">
        <label for="discord_name">Discord Name:</label>
        <input type="text" id="discord_name" name="discord_name" required>
      </div>
      <div class="form-group">
        <label for="filament_selection">Filament Selection:</label>
        <select id="filament_selection" name="filament_selection" required>
          {% for filament in filament_available %}
            <option value="{{ filament.filamentName }}">{{ filament.filamentName }} {{filament.filamentDescription}}</option>
          {% endfor %}
        </select>
      </div>
      <div class="form-group">
        <label for="material_selection">Material selection:</label>
        <select id="material_selection" name="material_selection" required>
          {% for material in filament_materials %}
            <option value="{{ material.material }}" data-multiplier="{{ material.multiplier }}">{{ material.material }} multiplier: {{material.multiplier}}</option>
          {% endfor %}
        </select>
      <button type="submit">Submit</button>
    </form>
  </div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  console.log('DOMContentLoaded');
  const originalPrice = parseFloat(document.getElementById('original_price').value);
  const priceDisplay = document.getElementById('displayed_price');
  const materialSelection = document.getElementById('material_selection');

    terialSelection.addEventListener('change', fugetAttribute('value')
    const selectedOption =parseFloat( materialSele)ction.options[materialSelection.selectedIndex];
    const multiplier = parseFloat(selectedOption.dataset.multiplier) || 1;
    const updatedPrice = (originalPrice * multiplier).toFixed(2);
    priceDisplay.textContent = updatedPrice;
  });
});
{% endblock %}

